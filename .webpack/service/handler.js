!function(e,t){for(var r in t)e[r]=t[r]}(exports,function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5)}([function(e,t){e.exports=require("graphql")},function(e,t,r){r(0);Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(10));function n(e){return e&&e.__esModule?e:{default:e}}const o=(0,n(r(11)).default)({config:{host:a.default.db.host,database:a.default.db.database,user:a.default.db.user,password:a.default.db.password}});t.default=o},function(e,t,r){r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.resolvers=void 0;var a=d(r(9)),n=d(r(12)),o=d(r(13));function d(e){return e&&e.__esModule?e:{default:e}}const s={Query:{...a.default.Query,...n.default.Query,...o.default.Query},Mutation:{...o.default.Mutation},DeliveryOrder:a.default.DeliveryOrder,SalesOrder:n.default.SalesOrder};t.resolvers=s},function(e,t,r){r(0);Object.defineProperty(t,"__esModule",{value:!0});var a,n=r(1),o=(a=n)&&a.__esModule?a:{default:a};const d={getAllData:async()=>{let e=await o.default.query("SELECT * FROM tms_do_copy1 limit 100");return await o.default.end(),e},getDatabyDoIdSap:async({do_id_sap:e})=>{let t=await o.default.query(`SELECT * FROM tms_do_copy1 where do_id_sap = ${e}`);return await o.default.end(),t[0]},getSoByDeliveryOrder:async({do_id_sap:e})=>{let t=await o.default.query(`SELECT * FROM tms_do_copy1 where do_id_sap = ${e}`);return await o.default.end(),t[0]},getDoItemDatabySoIdSap:async({so_id_sap:e})=>{let t=await o.default.query(`SELECT a.*\n  FROM \n  tms_do_copy1 a \n  INNER JOIN \n  tms_do_sales_order b\n\n  ON a.so_id_sap = b.so_id_sap AND a.reference_item = b.so_item\n  \n  where b.so_id_sap = ${e}\n  `);return await o.default.end(),t}};t.default=d},function(e,t,r){r(0);Object.defineProperty(t,"__esModule",{value:!0});var a,n=r(1),o=(a=n)&&a.__esModule?a:{default:a};const d={getAllData:async()=>{let e=await o.default.query("SELECT * FROM tms_do_sales_order limit 100");return await o.default.end(),e},getDatabySoIdSap:async({so_id_sap:e})=>{let t=await o.default.query(`SELECT * FROM tms_do_sales_order where so_id_sap = ${e}`);return await o.default.end(),t[0]},getSoItemDatabySoIdSap:async({so_id_sap:e})=>{let t=await o.default.query(`SELECT b.*\n  FROM \n  tms_do_copy1 a \n  INNER JOIN \n  tms_do_sales_order b\n\n  ON a.so_id_sap = b.so_id_sap AND a.reference_item = b.so_item\n  \n  where b.so_id_sap = ${e}\n  `);return await o.default.end(),t}};t.default=d},function(e,t,r){r(0);var a=r(6),n=r(7),o=r(2);const d=new a.ApolloServer({typeDefs:n.schema,resolvers:o.resolvers,formatError:e=>e.message.startsWith("Database Error: ")?new Error("Internal server error"):e,formatResponse:e=>(console.log(e),e),context:({event:e,context:t})=>({headers:e.headers,functionName:t.functionName,event:e,context:t}),playground:{endpoint:process.env.REACT_APP_GRAPHQL_ENDPOINT?process.env.REACT_APP_GRAPHQL_ENDPOINT:"/dev/graphql"},tracing:!0});t.graphqlHandler=d.createHandler({cors:{origin:"*"}})},function(e,t){e.exports=require("apollo-server-lambda")},function(e,t,r){r(0);Object.defineProperty(t,"__esModule",{value:!0}),t.schema=void 0;r(8);var a,n=r(2);(a=n)&&a.__esModule;t.schema="\n\ntype MetaDataQ {\n  affectedRows: Int\n  changedRows: Int\n  fieldCount: Int\n  message: String\n}\n\n\ntype SalesOrder {\n  id: ID\n  so_id_sap: String!\n  order_type_code: String\n  so_item: Int\n  material_code: String\n  material_descriptions: String\n  do_item: [DeliveryOrder]\n\n}\n\ntype DeliveryOrder {\n  id: ID\n  do_id_sap: String!\n  so_id_sap: String\n  do_creation_date: String\n  reference_item: Int\n  sales_order_item: [SalesOrder]\n}\n\n#*************** master status sap *****************#\n\ntype MasterStatus {\n  id: ID!\n  code: String\n  title: String\n  description: String\n  created_at: String\n  updated_at: String\n}\n\ntype Query {\n\n  deliveryOrder( do_id_sap: String! ): DeliveryOrder\n  deliveryOrders : [DeliveryOrder]\n  salesOrder( so_id_sap: String! ): SalesOrder\n  salesOrders: [SalesOrder]\n  masterStatus : [MasterStatus]\n  masterStatusById( id: ID!) : MasterStatus\n  getSoByDeliveryOrder( do_id_sap: String! ): DeliveryOrder\n\n}\n\ntype Mutation {\n    createMasterStatus (code: String, title: String, description: String ): MetaDataQ\n}\n\n\n\n\n\n\nschema {\n  query: Query,\n  mutation: Mutation\n}\n\n"},function(e,t){e.exports=require("graphql-tools")},function(e,t,r){r(0);Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(3)),n=o(r(4));function o(e){return e&&e.__esModule?e:{default:e}}const d={Query:{deliveryOrders:(e,t,r)=>a.default.getAllData(),deliveryOrder:(e,t,r)=>a.default.getDatabyDoIdSap(t),getSoByDeliveryOrder:(e,t,r)=>a.default.getDatabyDoIdSap(t)},DeliveryOrder:{sales_order_item:async(e,t,r)=>(console.log("DoController root",e),e.so_id_sap?n.default.getSoItemDatabySoIdSap({so_id_sap:e.so_id_sap}):null)}};t.default=d},function(e,t){e.exports=require("config")},function(e,t){e.exports=require("serverless-mysql")},function(e,t,r){r(0);Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(4)),n=o(r(3));function o(e){return e&&e.__esModule?e:{default:e}}const d={Query:{salesOrders:(e,t,r)=>a.default.getAllData(),salesOrder:(e,t,r)=>a.default.getDatabySoIdSap(t)},SalesOrder:{do_item:async(e,t,r)=>(console.log("SoController root",e),e.so_id_sap?n.default.getDoItemDatabySoIdSap({so_id_sap:e.so_id_sap}):null)}};t.default=d},function(e,t,r){r(0);Object.defineProperty(t,"__esModule",{value:!0});var a,n=r(14),o=(a=n)&&a.__esModule?a:{default:a};const d={Query:{masterStatus:(e,t,r)=>o.default.getAllData(t),masterStatusById:(e,t,r)=>o.default.getDatabyId(t)},Mutation:{createMasterStatus:(e,t,r)=>o.default.createData(t).catch(e=>{throw new Error(e)})}};t.default=d},function(e,t,r){r(0);Object.defineProperty(t,"__esModule",{value:!0});var a,n=r(1),o=(a=n)&&a.__esModule?a:{default:a};const d={getAllData:async()=>{let e=await o.default.query("SELECT * FROM  tms_ref_master_status_sap order by id desc");return await o.default.end(),e},getDatabyId:async({id:e})=>{let t=await o.default.query("SELECT * FROM  tms_ref_master_status_sap where id = ? order by id desc",[e]);return await o.default.end(),t[0]},createData:async e=>{const{code:t,title:r,description:a}=e;let n=await o.default.transaction().query("INSERT INTO tms_ref_master_status_sap (code, title, description) VALUES(?,?,?)",[t,r,a]).rollback(e=>(console.error(e),e)).commit();return await o.default.end(),console.log("results",n),n[0]}};t.default=d}]));